def format_ps1_for_json(ps1_file_path, output_file_path):
    try:
        with open(ps1_file_path, 'r') as ps1_file, open(output_file_path, 'w') as output_file:
            for line in ps1_file:
                # Escape backslashes and double quotes
                escaped_line = line.replace('\\', '\\\\').replace('"', '\\"')
                # Write the formatted line with \n at the end
                output_file.write(escaped_line.strip() + '\\n')
        print("File formatted and saved successfully.")
    except Exception as e:
        print(f"Error: {e}")


if __name__ == '__main__':
    format_ps1_for_json('malware_scan.ps1', 'malware_scan_formatted.ps1')
